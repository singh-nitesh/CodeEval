import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;


public class WhichWayIsFaster {
	public static void main (String[] args) throws IOException {
        File file = new File("c:\\aaa.txt");
        BufferedReader buffer = new BufferedReader(new FileReader(file));
        String line;
        while ((line = buffer.readLine()) != null) {
            String[] input = line.split(" \\| ");
            int Fx=-1,Fy=-1,Sx=-1,Sy=-1,P1x=-1,P1y=-1,P2x=-1,P2y=-1;
            for(int i=0;i<input.length;i++){
            	String val = input[i];
            	for(int j=0;j<val.length();j++){
            		if(val.charAt(j)=='F'){
            			Fx=i;
            			Fy=j;
            		} else if(val.charAt(j)=='S'){
            			Sx=i;
            			Sy=j;
            		} else if(val.charAt(j)=='P'){
            			if(P1x==-1){
            				P1x=i;
            				P1y=j;
            			} else {
            				P2x=i;
            				P2y=j;
            			}
            		}
            	}
            }
            
            int FSx=Math.abs(Fx-Sx);
            int FSy=Math.abs(Fy-Sy);
            int FSLand=(FSx+FSy)*2;
            
            int P1P2x=Math.abs(P1x-P2x);
            int P1P2y=Math.abs(P1y-P2y);
            int P1P2=(P1P2x+P1P2y)+2;
            
            int FSWater=10000;
            if((P1P2x+P1P2y)*2<FSLand){
            	FSWater = (FSLand - ((P1P2x+P1P2y)*2))+P1P2;

            	if(P1x==P2x){
            		int x=0,y=0;
            		if(P1y<P2y){
            			x=P1y;
            			y=P2y;
            		} else {
            			x=P2y;
            			y=P1y;
            		}
            		for(int i=x;i<=y;i++){
            			if(input[P1x].charAt(i)=='^'){
            				FSWater=10000;
            				break;
            			}
            		}
            	} else if(P1y==P2y){
            		int x=0,y=0;
            		if(P1x<P2x){
            			x=P1x;
            			y=P2x;
            		} else {
            			x=P2x;
            			y=P1x;
            		}
            		for(int i=x;i<=y;i++){
            			if(input[i].charAt(P1y)=='^'){
            				FSWater=10000;
            				break;
            			}
            		}
            	}
            }
            System.out.println(FSLand>FSWater?FSWater:FSLand);
        }
    }
}


/*
 * 
**P******* | *****P**** | ********** | ********** | *********S | ****F***** | ********** | ********** | ********** | **********
**P******** | ******S**** | *********** | ******P**** | *********** | *********** | ****^****** | ******F**** | *********** | *********** | ***********
********** | **S******* | F********* | ********P* | *****P**** | ********** | ********** | ********** | ********** | **********
****** | *P**** | **S*** | F***** | **P*** | ******
*********** | *******F*** | ********^** | ****P****** | *********** | *********** | ^********** | ***P******* | *********** | ******S**** | ***********
*********** | ****^****** | *S********* | *********** | **********P | *****P***** | *********** | ^********** | ****^****** | **^******** | *********F*
*****^**** | ********** | ********** | **P******* | ********** | *******P** | **^******* | *******S** | ****^***** | ***F******
***** | *S*** | P**** | *P*** | ***F*
****P***** | ********** | **F******* | ******S*** | ********** | ******P*** | ********** | ********** | ********** | **********
****S | **P** | **P** | ***** | **F**
**^F | P**P | **** | S***
S*** | **** | P*^P | **^F
*******^* | *S******* | ********* | ******^** | ********* | *****P*** | ********* | F******** | *******P*
****** | ****** | ***P** | S***** | *****P | ****F*
********* | ****^**** | ********* | *******P* | ********* | *****F*** | ********* | ****S**** | P********
**********P | *****^***** | ********^** | S********** | *******F*** | ***^******* | *********** | ***P******* | *********** | *********** | ***********
*********** | *********** | *********** | ****S****** | *****P***** | *********** | ********P** | F********** | *********** | *********** | ***********
****P* | ****** | *S**** | **F*** | ****** | P*****
F******* | ***P**** | S******* | ******** | ******** | ******P* | ******** | ********
S**** | **F** | ****P | ***** | ****P
P***** | *S**** | *****P | F***** | ****** | ******
******** | ******** | ***P**** | S******* | ******** | *******P | ****^*** | **F*****
************ | ************ | *S********** | *********F** | *******P**** | ************ | ************ | ***********P | ************ | ************ | ************ | ************
***F*** | **S**** | *****P* | ******* | ******* | ******* | *****P*
********P | ********* | ********* | ********* | ****P**** | ********* | **S****** | ********^ | *F*******
**P** | **P** | S**** | ***** | ***F*
************ | *********S** | *********F** | ************ | ******^***** | ************ | ************ | ************ | ******P***** | ********^*** | P*********** | ************
P***** | ***S** | ****** | F***** | ****** | P*****
************ | *******P**** | ************ | ************ | ************ | ************ | *******F**** | *****S****** | ************ | ***********P | ************ | ************
****F** | ******* | ******* | ****S** | **P**** | ******P | *******
********F* | ********** | ********** | ******S*** | ****P***** | ******P*** | ********** | ********** | ********** | **********
*********** | ********^** | ^********** | ***S******* | *********** | *********** | F********** | ****^****** | *********** | ****P****** | ****P******
*******P | ******** | ******** | S******* | *****P** | *F****** | ******** | ********
************ | ^*********** | ^*********** | *******^**** | *******F**** | ************ | ***P******** | *P********** | ************ | ************ | *****S****** | ***********^
****F* | **P*** | ****S* | ****** | ****** | ****P*
********** | ********** | ********** | *********P | ********** | ********S* | P********* | ********** | ****F***** | **********
****P** | ******* | *F***** | ******* | *P***** | **S**** | *******
***F* | ***** | *P*** | ****P | *S***
***** | ***P* | *P*** | S**** | ****F
*****S | *****F | ***P** | ****** | ****** | *P****
 */




